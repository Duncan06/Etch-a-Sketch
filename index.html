<!DOCTYPE html>
<head>
    <title>Etch-a-Sketch</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button id = "refresh" onclick = "refresh()"> Reset tiles.</button>
    <button id = "board" onclick = "reset()"> Reset board. </button>
    <div class = "gameboard"></div>
</body>

<script>
    let tileprompt = window.prompt("Please enter the width or height of the tiles you'd like.");
    let tiles = tileprompt*tileprompt;
    let rowdim = 100/tileprompt;
    let dimensions = 100/tiles;
    
    // let styles = `
    //     .start {
    //         flex: 1 0 ${dimensions};
    //         border: black;
    //         padding: 0;
    //         margin: 0;
    //         width: calc(100%/${tiles});
    //         height: calc(100%/${tiles};
    //         border-style: solid;
    //         background-color: white;
    //     }`
    // let styleSheet = document.createElement('style');
    // styleSheet.type = "text/css";
    // styleSheet.innerText = styles;
    // document.head.appendChild(styleSheet);
    const gameboard = document.querySelector('.gameboard');
    let row = 0;
    rows = document.createElement('div');
    rows.classList.add("rows");
    rows.style.width = `${rowdim}%`;

    for (let amount= 0; amount < tiles; amount++) {
        makesquares = document.createElement('div');
        makesquares.classList.add("start");
        if (row % tileprompt == 0 && row != 0){
            gameboard.appendChild(rows);
            rows = document.createElement('div');
            rows.classList.add("rows");
            rows.style.width = `${rowdim}%`;
            row = 0;
        }
        if (amount == tiles - 1){
            rows.appendChild(makesquares);
            gameboard.appendChild(rows);
            break;
        }
        else {
            row++;
        }
        rows.appendChild(makesquares);

    }

    let squares = document.querySelectorAll('.start');
    squares.forEach(e => e.addEventListener('mouseover', () => {
                event.target.classList.add("wentover");
                event.target.style.backgroundColor = `rgba(${random()}, ${random()}, ${random()}, 1)`;
        })
    );

    function refresh(gameboard) {
        marked = document.querySelectorAll('.wentover');
        marked.forEach(e => e.classList.toggle('wentover'));
    }

    function reset() {
        location.reload();
    }

    function random() {
        return rvalue = Math.floor((Math.random()*255));
    }

</script>